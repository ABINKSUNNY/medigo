{#{% extends 'temp/patient_home.html' %}#}
{##}
{#{% block base %}#}
{#<div class="container mt-5">#}
{#    <h3>Pay ₹{{ appointment.amount }} for Appointment #{{ appointment.a_id }}</h3>#}
{##}
{#    <button id="rzp-button" class="btn btn-primary">Pay Now</button>#}
{##}
{#    <form id="hidden-form" method="POST" action="{% url 'payment_success' %}" style="display:none;">#}
{#        {% csrf_token %}#}
{#        <input type="hidden" name="razorpay_payment_id" id="razorpay_payment_id">#}
{#        <input type="hidden" name="appointment_id" value="{{ appointment.a_id }}">#}
{#    </form>#}
{#</div>#}
{##}
{#<script src="https://checkout.razorpay.com/v1/checkout.js"></script>#}
{#<script>#}
{#    const options = {#}
{#        "key": "{{ razorpay_key }}",#}
{#        "amount": "{{ payment.amount }}",  // in paise#}
{#        "currency": "INR",#}
{#        "name": "Hospital Portal",#}
{#        "description": "Appointment Payment",#}
{#        "order_id": "{{ payment.id }}",#}
{#        "handler": function (response) {#}
{#            // Populate the hidden form with payment_id#}
{#            document.getElementById("razorpay_payment_id").value = response.razorpay_payment_id;#}
{#            // Submit the hidden form#}
{#            document.getElementById("hidden-form").submit();#}
{#        },#}
{#        "theme": {#}
{#            "color": "#3399cc"#}
{#        }#}
{#    };#}
{##}
{#    const rzp1 = new Razorpay(options);#}
{#    document.getElementById('rzp-button').onclick = function (e) {#}
{#        rzp1.open();#}
{#        e.preventDefault();#}
{#    }#}
{#</script>#}
{#{% endblock %}#}

{##}
{#{% extends 'temp/patient_home.html' %}#}
{##}
{#{% block base %}#}
{#<style>#}
{#  body, html {#}
{#    height: 100%;#}
{#    background-color: #fff;#}
{#    margin: 0;#}
{#    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;#}
{#  }#}
{#  .payment-container {#}
{#    height: 100vh;#}
{#    display: flex;#}
{#    justify-content: center;#}
{#    align-items: center;#}
{#    padding: 15px;#}
{#  }#}
{#  .payment-card {#}
{#    max-width: 480px;#}
{#    width: 100%;#}
{#    background: #fff;#}
{#    border: 2px solid #1877f2;#}
{#    border-radius: 10px;#}
{#    box-shadow: 0 6px 18px rgba(24, 119, 242, 0.3);#}
{#    padding: 30px 40px;#}
{#  }#}
{#  .payment-card h3 {#}
{#    color: #1877f2;#}
{#    font-weight: 700;#}
{#    margin-bottom: 25px;#}
{#    text-align: center;#}
{#  }#}
{#  .appointment-info {#}
{#    font-size: 15px;#}
{#    color: #444;#}
{#    margin-bottom: 30px;#}
{#  }#}
{#  .appointment-info div {#}
{#    margin-bottom: 10px;#}
{#    display: flex;#}
{#    justify-content: space-between;#}
{#  }#}
{#  .appointment-info div span.label {#}
{#    font-weight: 600;#}
{#    color: #1877f2;#}
{#  }#}
{#  #rzp-button {#}
{#    background-color: #1877f2;#}
{#    border-color: #1877f2;#}
{#    font-weight: 600;#}
{#    padding: 12px;#}
{#    width: 100%;#}
{#    font-size: 16px;#}
{#    border-radius: 5px;#}
{#    transition: background-color 0.3s ease;#}
{#  }#}
{#  #rzp-button:hover {#}
{#    background-color: #145db2;#}
{#    border-color: #145db2;#}
{#  }#}
{#</style>#}
{##}
{#<section class="payment-container">#}
{#  <div class="payment-card">#}
{#    <h3>Complete Your Payment</h3>#}
{##}
{#    <div class="appointment-info">#}
{#      <div><span class="label">Appointment ID:</span> <span>{{ appointment.a_id }}</span></div>#}
{#      <div><span class="label">Patient Name:</span> <span>{{ appointment.patient.name|default:"N/A" }}</span></div>#}
{#      <div><span class="label">Doctor:</span> <span>{{ appointment.doctor.doc_name|default:"N/A" }}</span></div>#}
{#      <div><span class="label">Date & Time:</span>#}
{#        <span>#}
{#          {{ appointment.date|date:"d M, Y" }} at {{ appointment.time|time:"h:i A" }}#}
{#        </span>#}
{#      </div>#}
{#      <div><span class="label">Amount to Pay:</span> <span>₹{{ appointment.amount }}</span></div>#}
{#    </div>#}
{##}
{#    <button id="rzp-button">Pay Now</button>#}
{##}
{#    <form id="hidden-form" method="POST" action="{% url 'payment_success' %}" style="display:none;">#}
{#      {% csrf_token %}#}
{#      <input type="hidden" name="razorpay_payment_id" id="razorpay_payment_id">#}
{#      <input type="hidden" name="appointment_id" value="{{ appointment.a_id }}">#}
{#    </form>#}
{#  </div>#}
{#</section>#}
{##}
{#<script src="https://checkout.razorpay.com/v1/checkout.js"></script>#}
{#<script>#}
{#  const options = {#}
{#    "key": "{{ razorpay_key }}",#}
{#    "amount": "{{ payment.amount }}",#}
{#    "currency": "INR",#}
{#    "name": "Hospital Portal",#}
{#    "description": "Appointment Payment",#}
{#    "order_id": "{{ payment.id }}",#}
{#    "handler": function (response) {#}
{#      document.getElementById("razorpay_payment_id").value = response.razorpay_payment_id;#}
{#      document.getElementById("hidden-form").submit();#}
{#    },#}
{#    "theme": {#}
{#      "color": "#1877f2"#}
{#    }#}
{#  };#}
{##}
{#  const rzp1 = new Razorpay(options);#}
{#  document.getElementById('rzp-button').onclick = function(e) {#}
{#    e.preventDefault();#}
{#    rzp1.open();#}
{#  }#}
{#</script>#}
{#{% endblock %}#}



{% extends 'temp/patient_home.html' %}

{% block base %}
<style>
  body, html {
    height: 100%;
    background-color: #fff;
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  .payment-container {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 15px;
  }
  .payment-card {
    max-width: 480px;
    width: 100%;
    background: #fff;
    border: 2px solid #ccc; /* light grey border */
    border-radius: 10px;
    box-shadow: 0 6px 18px rgba(24, 119, 242, 0.15);
    padding: 30px 40px;
  }
  .payment-card h3 {
    color: #1877f2;
    font-weight: 700;
    margin-bottom: 25px;
    text-align: center;
  }
  .appointment-info {
    font-size: 17px; /* increased font size */
    color: #444;
    margin-bottom: 30px;
  }
  .appointment-info div {
    margin-bottom: 12px;
    display: flex;
    justify-content: space-between;
    font-weight: 700; /* made text bold */
  }
  .appointment-info div span.label {
    color: rgb(7, 31, 46);
  }
  #rzp-button {
    background-color: #1877f2;
    border-color: #1877f2;
    font-weight: 600;
    padding: 12px;
    width: 100%;
    font-size: 16px;
    border-radius: 5px;
    color: white; /* white text */
    transition: background-color 0.3s ease;
  }
  #rzp-button:hover {
    background-color: #145db2;
    border-color: #145db2;
  }
</style>

{#<section class="payment-container">#}
{#  <div class="payment-card">#}
{#    <h3>Complete Your Payment</h3>#}
{##}
{#    <div class="appointment-info">#}
{#      <div><span class="label">Appointment ID:</span> <span>{{ appointment.a_id }}</span></div>#}
{#      <div><span class="label">Patient Name:</span> <span>{{ appointment.patient.name|default:"N/A" }}</span></div>#}
{#      <div><span class="label">Doctor:</span> <span>{{ appointment.doctor.doc_name|default:"N/A" }}</span></div>#}
{#      <div><span class="label">Date & Time:</span>#}
{#        <span>#}
{#          {{ appointment.date|date:"d M, Y" }} at {{ appointment.time|time:"h:i A" }}#}
{#        </span>#}
{#      </div>#}
{#      <div><span class="label">Amount to Pay:</span> <span>₹{{ appointment.amount }}</span></div>#}
{#    </div>#}
{##}
{#    <button id="rzp-button">Pay Now</button>#}
{##}
{#    <form id="hidden-form" method="POST" action="{% url 'payment_success' %}" style="display:none;">#}
{#      {% csrf_token %}#}
{#      <input type="hidden" name="razorpay_payment_id" id="razorpay_payment_id">#}
{#      <input type="hidden" name="appointment_id" value="{{ appointment.a_id }}">#}
{#    </form>#}
{#  </div>#}
{#</section>#}
<section id="payment-section" class="payment-container">
  <div class="payment-card">
    <h3>Complete Your Payment</h3>
  <style>
  html {
    scroll-behavior: smooth;
  }
 </style>
    <div class="appointment-info">
      <div><span class="label">Appointment ID:</span> <span>{{ appointment.a_id }}</span></div>
      <div><span class="label">Patient Name:</span> <span>{{ appointment.patient.name|default:"N/A" }}</span></div>
      <div><span class="label">Doctor:</span> <span>{{ appointment.doctor.doc_name|default:"N/A" }}</span></div>
      <div><span class="label">Date & Time:</span>
        <span>{{ appointment.date|date:"d M, Y" }} at {{ appointment.time|time:"h:i A" }}</span>
      </div>
      <div><span class="label">Amount to Pay:</span> <span>₹{{ appointment.amount }}</span></div>
    </div>

    <button id="rzp-button">Pay Now</button>

    <form id="hidden-form" method="POST" action="{% url 'payment_success' %}" style="display:none;">
      {% csrf_token %}
      <input type="hidden" name="razorpay_payment_id" id="razorpay_payment_id">
      <input type="hidden" name="appointment_id" value="{{ appointment.a_id }}">
    </form>
  </div>
</section>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
  const options = {
    "key": "{{ razorpay_key }}",
    "amount": "{{ payment.amount }}",
    "currency": "INR",
    "name": "Hospital Portal",
    "description": "Appointment Payment",
    "order_id": "{{ payment.id }}",
    "handler": function (response) {
      document.getElementById("razorpay_payment_id").value = response.razorpay_payment_id;
      document.getElementById("hidden-form").submit();
    },
    "theme": {
      "color": "#1877f2"
    }
  };

  const rzp1 = new Razorpay(options);
  document.getElementById('rzp-button').onclick = function(e) {
    e.preventDefault();
    rzp1.open();
  }
</script>
{% endblock %}
